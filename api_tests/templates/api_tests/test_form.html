{% extends 'api_tests/base.html' %}

{% block title %}Start New Test Run{% endblock %}
{% block page_title %}New Test Run{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm animate__animated animate__fadeInUp">
            <div class="card-header bg-white border-bottom-0 pt-4 pb-0">
                <h4 class="card-title fw-bold mb-0">
                    <i class="bi bi-rocket-takeoff text-primary me-2"></i> Launch Test from Swagger
                </h4>
            </div>
            <div class="card-body p-4">
                <p class="text-muted mb-4">
                    Enter the URL of your Swagger/OpenAPI documentation below. We'll parse it and generate test cases
                    automatically using our AI engine.
                </p>

                <form method="post" action="{% url 'parse_and_test' %}" onsubmit="showLoading()">
                    {% csrf_token %}
                    <div class="mb-4">
                        <label for="swagger_url" class="form-label fw-semibold">Swagger Documentation URL</label>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="bi bi-link-45deg text-muted"></i>
                            </span>
                            <input type="url" class="form-control border-start-0 ps-0" id="swagger_url"
                                name="swagger_url" placeholder="e.g., https://petstore.swagger.io/v2/swagger.json"
                                required>
                        </div>
                        <div class="form-text mt-2"><i class="bi bi-info-circle me-1"></i> Make sure the URL is publicly
                            accessible or reachable from this server.</div>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="button" class="btn btn-light me-md-2"
                            onclick="window.history.back()">Cancel</button>
                        <button type="submit" class="btn btn-primary px-5 py-2">
                            <i class="bi bi-play-fill me-1"></i> Start Testing
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Quick Tips or Recent History could go here -->
        <div class="mt-4 text-center text-muted" style="font-size: 0.9rem;">
            <i class="bi bi-shield-check me-1"></i> AI-Powered Security & Functional Testing
        </div>
    </div>
</div>
{% endblock %}